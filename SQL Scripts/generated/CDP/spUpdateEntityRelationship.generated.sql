-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Relationships
-- Item: spUpdateEntityRelationship
-- Generated: 12/8/2023, 3:54:02 PM
--
-- This was generated by the Entity Generator.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------

------------------------------------------------------------
----- UPDATE PROCEDURE FOR EntityRelationship  
------------------------------------------------------------
IF OBJECT_ID('dbo.spUpdateEntityRelationship', 'P') IS NOT NULL
    DROP PROCEDURE [dbo].[spUpdateEntityRelationship]
GO

CREATE PROCEDURE [dbo].[spUpdateEntityRelationship]
    @ID int,
    @EntityID int,
    @RelatedEntityID int,
    @BundleInAPI bit,
    @IncludeInParentAllQuery bit,
    @Type nchar(20),
    @EntityKeyField nvarchar(50),
    @RelatedEntityJoinField nvarchar(50),
    @JoinView nvarchar(50),
    @JoinEntityJoinField nvarchar(50),
    @JoinEntityInverseJoinField nvarchar(50),
    @DisplayInForm bit,
    @DisplayName nvarchar(50)
AS
BEGIN
    SET NOCOUNT ON;
    UPDATE 
        [admin].[EntityRelationship]
    SET 
        [EntityID] = @EntityID,
        [RelatedEntityID] = @RelatedEntityID,
        [BundleInAPI] = @BundleInAPI,
        [IncludeInParentAllQuery] = @IncludeInParentAllQuery,
        [Type] = @Type,
        [EntityKeyField] = @EntityKeyField,
        [RelatedEntityJoinField] = @RelatedEntityJoinField,
        [JoinView] = @JoinView,
        [JoinEntityJoinField] = @JoinEntityJoinField,
        [JoinEntityInverseJoinField] = @JoinEntityInverseJoinField,
        [DisplayInForm] = @DisplayInForm,
        [DisplayName] = @DisplayName,
        UpdatedAt = GETDATE()
    WHERE 
        [ID] = @ID

    -- return the updated record so the caller can see the updated values and any calculated fields
    SELECT * FROM vwEntityRelationships WHERE ID = @ID
END
GO
GRANT EXECUTE ON [spUpdateEntityRelationship] TO [cdp_Developer], [cdp_Integration]
    