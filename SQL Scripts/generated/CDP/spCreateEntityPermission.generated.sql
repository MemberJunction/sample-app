-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Entity Permissions
-- Item: spCreateEntityPermission
-- Generated: 12/8/2023, 3:54:04 PM
--
-- This was generated by the Entity Generator.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------

------------------------------------------------------------
----- CREATE PROCEDURE FOR EntityPermission
------------------------------------------------------------
IF OBJECT_ID('dbo.spCreateEntityPermission', 'P') IS NOT NULL
    DROP PROCEDURE [dbo].[spCreateEntityPermission]
GO

CREATE PROCEDURE [dbo].[spCreateEntityPermission]
    @EntityID int,
    @RoleName nvarchar(50),
    @CanCreate bit,
    @CanRead bit,
    @CanUpdate bit,
    @CanDelete bit,
    @ReadRLSFilterID int,
    @CreateRLSFilterID int,
    @UpdateRLSFilterID int,
    @DeleteRLSFilterID int
AS
BEGIN
    SET NOCOUNT ON;
    INSERT INTO 
    [admin].[EntityPermission]
        (
            [EntityID],
            [RoleName],
            [CanCreate],
            [CanRead],
            [CanUpdate],
            [CanDelete],
            [ReadRLSFilterID],
            [CreateRLSFilterID],
            [UpdateRLSFilterID],
            [DeleteRLSFilterID]
        )
    VALUES
        (
            @EntityID,
            @RoleName,
            @CanCreate,
            @CanRead,
            @CanUpdate,
            @CanDelete,
            @ReadRLSFilterID,
            @CreateRLSFilterID,
            @UpdateRLSFilterID,
            @DeleteRLSFilterID
        )

    -- return the new record from the base view, which might have some calculated fields
    SELECT * FROM vwEntityPermissions WHERE ID = SCOPE_IDENTITY()
END
GO
GRANT EXECUTE ON [spCreateEntityPermission] TO [cdp_Developer], [cdp_Integration]
